<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kompas Polityczny - Fangea i inne kontynenty</title>
    
    <!-- Globalne style Fangea -->
    <link rel="stylesheet" href="/fangea/style.css">
    
    <!-- Style kompasu -->
    <style>
        /* Kontener główny */
        .compass-container {
            padding: 20px 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Obszar kompasu z przewijaniem */
        .compass-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px 0;
        }

        /* Canvas kompasu */
        #compassCanvas {
            width: 800px;
            height: 800px;
            margin: 0 auto;
            position: relative;
            background: url('https://upload.wikimedia.org/wikipedia/commons/5/56/Political_Compass_yellow_LibRight_v2.svg') no-repeat center/contain;
        }

        /* Pinezki */
        .compass-pin {
            width: 35px;
            height: 35px;
            position: absolute;
            border-radius: 50%;
            border: 2px solid var(--accent-color);
            cursor: pointer;
            transition: transform 0.2s;
            object-fit: cover;
        }

        .compass-pin:hover {
            transform: scale(1.15);
        }

        /* Modal */
        #compassModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-box {
            background: var(--bg-card);
            width: 90%;
            max-width: 400px;
            border-radius: 8px;
            padding: 25px;
            position: relative;
            border: 1px solid var(--border-color);
        }

        .modal-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: absolute;
            right: -40px;
            top: -40px;
            border: 3px solid var(--accent-color);
            object-fit: cover;
        }

        @media (max-width: 768px) {
            #compassCanvas {
                width: 600px;
                height: 600px;
            }
            
            .modal-avatar {
                width: 60px;
                height: 60px;
                right: -30px;
                top: -30px;
            }
        }
    </style>
</head>
<body>
    <!-- Header wstrzykiwany przez skrypt -->
    <div id="pageHeader"></div>

    <!-- Główna zawartość -->
    <main class="main-content">
        <div class="section-header">
            <h1>Kompas Polityczny</h1>
            <div class="section-description">
                Mapa poglądów członków społeczności
            </div>
        </div>

        <div class="compass-container">
            <div class="compass-wrapper">
                <div id="compassCanvas"></div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div id="compassModal" onclick="closeModal(event)">
        <div class="modal-box" onclick="event.stopPropagation()">
            <img class="modal-avatar" id="modalAvatar" alt="Avatar">
            <h2 class="modal-title" id="modalName"></h2>
            <div class="meta-info" id="modalCoords"></div>
            <div class="content-box" id="modalDescription"></div>
            <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
    </div>

    <!-- Wymagane skrypty -->
    <script src="https://grumqy.github.io/fangea/pageheader.js"></script>

    <!-- Skrypt kompasu -->
    <script>
        // Konfiguracja społeczności
        const communityMembers = [
            {
                nick: "Boxin",
                posX: 2,
                posY: -3,
                avatar: "https://i.ebayimg.com/images/g/REcAAOSwkApfbIGQ/s-l960.webp",
                description: "Przykładowy opis użytkownika"
            }
            // Dodaj kolejnych użytkowników tutaj
        ];

        // Inicjalizacja kompasu
        function initCompass() {
            const $canvas = $('#compassCanvas');
            
            communityMembers.forEach(member => {
                const $pin = $('<img>', {
                    class: 'compass-pin',
                    src: member.avatar,
                    css: {
                        left: `${(member.posX + 10) * 5}%`,
                        top: `${(10 - member.posY) * 5}%`
                    }
                }).click(() => showModal(member));
                
                $canvas.append($pin);
            });
        }

        // Obsługa modala
        function showModal(member) {
            $('#modalAvatar').attr('src', member.avatar);
            $('#modalName').text(member.nick);
            $('#modalCoords').html(`<i class="fas fa-map-marker-alt"></i> X: ${member.posX}, Y: ${member.posY}`);
            $('#modalDescription').text(member.description);
            $('#compassModal').fadeIn(200);
        }

        function closeModal() {
            $('#compassModal').fadeOut(200);
        }

        // Inicjalizacja po załadowaniu strony
        $(document).ready(function() {
            // Inicjalizacja headera
            initPageHeader();
            
            // Inicjalizacja kompasu
            initCompass();
            
            // Obsługa kliknięć w tło modala
            $(document).on('click', '#compassModal', function(e) {
                if (e.target === this) closeModal();
            });
        });
    </script>
</body>
</html>
