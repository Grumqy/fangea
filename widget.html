<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
  <link
        href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
<style>
  .fangea-container {
    position: fixed;
    bottom: 20px;
    right: 0;
    width: 320px;
    height: auto;
    z-index: 10;
    pointer-events: none;
  }

  .fangea-widget {
    position: absolute;
    bottom: 0;
    right: -300px;
    width: 320px;
    background: rgb(27, 38, 47);
    color: white;
    border-radius: 16px 0 0 16px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
    padding: 20px;
    transition: right 0.3s ease;
    z-index: 2;
    font-family: 'Montserrat', 'Montserrat Alternates', Arial, sans-serif;
    pointer-events: auto;
  }


  .fangea-tab {
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 100%;
    cursor: pointer;
    z-index: 3;
    pointer-events: auto;
  }

  .fangea-tab:hover + .fangea-widget,
  .fangea-widget:hover {
    right: 0;
  }

  .fangea-content {
    font-size: 14px;
    text-align: left;
    line-height: 1.5;
    padding-right: 10px;
  }

  .fangea-content ul {
    padding-left: 18px;
    margin: 10px 0;
  }

  .fangea-content li {
    margin-bottom: 6px;
  }

  .fangea-content a {
    color: #658aad;
    font-weight: bold;
    text-decoration: none;
    cursor: pointer;
  }

  .fangea-content a:hover {
    text-decoration: underline;
  }
</style>


<div class="fangea-container">
  <div class="fangea-tab"></div>
  <div class="fangea-widget">
    <div class="fangea-content">
      <p>Aby w pełni zanurzyć się w doświadczenie słuchania naszych stacji radiowych, dodaj do swojej przeglądarki rozszerzenie <strong>Fangea Rich Player</strong>!</p>
      <ul>
        <li>Zainstaluj <a href="https://www.tampermonkey.net/" target="_blank">Tampermonkey</a> na swojej przeglądarce.</li>
        <li>Skopiuj nasz gotowy <a id="copy-script-link">skrypt</a>.</li>
        <li>Wklej go jako nową regułę w Tampermonkey.</li>
      </ul>
      <p>Odtwarzacze YouTube w naszych playlistach zyskają nowy, radiowy wygląd!</p>
    </div>
  </div>
</div>

<script>
document.getElementById('copy-script-link').addEventListener('click', async function(e) {
  e.preventDefault();
  
  const code = `// ==UserScript==
// @name         YouTube → Fangea Rich Player
// @namespace    http://tampermonkey.net/
// @version      1.1.2
// @description  UI na wzór radia internetowego
// @match        https://www.youtube.com/playlist?list*
// @match        https://www.youtube.com/watch?*list*
// @run-at       document-idle
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==
[... reszta skryptu ...]`;

  try {
    // Metoda 1: Nowoczesne API (działa w HTTPS)
    if (navigator.clipboard && window.isSecureContext) {
      await navigator.clipboard.writeText(code);
      showFeedback('Skrypt skopiowany do schowka!', true);
      return;
    }

    // Metoda 2: Stara metoda z textarea (działa wszędzie)
    const textarea = document.createElement('textarea');
    textarea.value = code;
    textarea.style.position = 'fixed';
    textarea.style.opacity = 0;
    document.body.appendChild(textarea);
    textarea.select();
    
    const success = document.execCommand('copy');
    document.body.removeChild(textarea);
    
    if (success) {
      showFeedback('Skrypt skopiowany do schowka!', true);
    } else {
      throw new Error('Brak uprawnień');
    }
  } catch (error) {
    // Metoda 3: Awaryjne wyświetlenie kodu do ręcznego kopiowania
    showCodeModal(code);
  }
});

// Pokazuje komunikat zamiast alert()
function showFeedback(message, isSuccess) {
  const feedback = document.createElement('div');
  feedback.style.position = 'fixed';
  feedback.style.bottom = '20px';
  feedback.style.right = '20px';
  feedback.style.padding = '12px 24px';
  feedback.style.background = isSuccess ? '#4CAF50' : '#F44336';
  feedback.style.color = 'white';
  feedback.style.borderRadius = '4px';
  feedback.style.zIndex = '99999';
  feedback.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
  feedback.textContent = message;
  
  document.body.appendChild(feedback);
  setTimeout(() => feedback.remove(), 3000);
}

// Pokazuje modal z kodem do ręcznego kopiowania
function showCodeModal(code) {
  const modal = document.createElement('div');
  modal.style.position = 'fixed';
  modal.style.top = '0';
  modal.style.left = '0';
  modal.style.width = '100%';
  modal.style.height = '100%';
  modal.style.background = 'rgba(0,0,0,0.8)';
  modal.style.zIndex = '99990';
  modal.style.display = 'flex';
  modal.style.justifyContent = 'center';
  modal.style.alignItems = 'center';
  
  const box = document.createElement('div');
  box.style.background = '#1b262f';
  box.style.padding = '20px';
  box.style.borderRadius = '8px';
  box.style.maxWidth = '80%';
  box.style.maxHeight = '80vh';
  box.style.overflow = 'auto';
  box.style.color = 'white';
  box.style.fontFamily = 'monospace';
  
  const codeElement = document.createElement('pre');
  codeElement.textContent = code;
  codeElement.style.whiteSpace = 'pre-wrap';
  
  const closeBtn = document.createElement('button');
  closeBtn.textContent = 'Zamknij';
  closeBtn.style.marginTop = '15px';
  closeBtn.style.padding = '8px 16px';
  closeBtn.style.background = '#658aad';
  closeBtn.style.border = 'none';
  closeBtn.style.borderRadius = '4px';
  closeBtn.style.cursor = 'pointer';
  
  box.appendChild(codeElement);
  box.appendChild(closeBtn);
  modal.appendChild(box);
  document.body.appendChild(modal);
  
  closeBtn.addEventListener('click', () => modal.remove());
}
</script>
